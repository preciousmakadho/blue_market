<header class="header">
  <div class="main-header">
    <div class="container header-content" [class.mobile-open]="mobileMenuOpen">
      <!-- Logo on far left -->
      <div class="logo-section">
        <div class="logo" (click)="navigateTo('')" style="cursor: pointer;">
          <img src="Assets/blulogo.png" class="logo-image" />
          <div class="logo-text">
            <h4>BluFountain Market</h4>
          </div>
        </div>
      </div>

      <!-- Search bar in center with category dropdown -->
      <div class="search-section">
        <div class="search-bar">
          <div class="category-dropdown-wrapper">
            <button class="category-dropdown-btn" [class.active]="categoryDropdownOpen" 
                    (click)="toggleCategoryDropdown()">
              <span class="category-text">{{ selectedCategory }}</span>
              <span class="material-icons">expand_more</span>
            </button>
            <div class="category-dropdown-menu" *ngIf="categoryDropdownOpen">
              <div class="category-list">
                <a (click)="selectCategory('Arts & Crafts')" class="category-option">Arts & Crafts</a>
                <a (click)="selectCategory('Automotive')" class="category-option">Automotive</a>
                <a (click)="selectCategory('Baby')" class="category-option">Baby</a>
                <a (click)="selectCategory('Beauty & Personal Care')" class="category-option">Beauty & Personal Care</a>
                <a (click)="selectCategory('Books')" class="category-option">Books</a>
                <a (click)="selectCategory('Boys Fashion')" class="category-option">Boys' Fashion</a>
                <a (click)="selectCategory('Computers')" class="category-option">Computers</a>
                <a (click)="selectCategory('Deals')" class="category-option">Deals</a>
                <a (click)="selectCategory('Digital Music')" class="category-option">Digital Music</a>
                <a (click)="selectCategory('Electronics')" class="category-option">Electronics</a>
                <a (click)="selectCategory('Girls Fashion')" class="category-option">Girls' Fashion</a>
                <a (click)="selectCategory('Health & Household')" class="category-option">Health & Household</a>
                <a (click)="selectCategory('Home & Kitchen')" class="category-option">Home & Kitchen</a>
                <a (click)="selectCategory('Industrial & Scientific')" class="category-option">Industrial & Scientific</a>
                <a (click)="selectCategory('Kindle Store')" class="category-option">Kindle Store</a>
                <a (click)="selectCategory('Luggage')" class="category-option">Luggage</a>
                <a (click)="selectCategory('Men Fashion')" class="category-option">Men's Fashion</a>
                <a (click)="selectCategory('Movies & TV')" class="category-option">Movies & TV</a>
                <a (click)="selectCategory('Music, CDs & Vinyl')" class="category-option">Music, CDs & Vinyl</a>
              </div>
            </div>
          </div>
          <input
            type="text"
            [(ngModel)]="searchQuery"
            placeholder="Search BluFountain"
            (keyup.enter)="searchProducts()"
            class="search-input"
          />
          <button class="search-btn" (click)="searchProducts()">
            <span class="material-icons">search</span>
          </button>
        </div>
      </div>

      <!-- Header actions on far right -->
      <div class="header-actions">
        <a class="header-action-item become-vendor" (click)="navigateTo('/become-vendor')">
          <span class="material-icons">arrow_forward</span>
          <span class="text">Become Vendor</span>
        </a>
        
        <a class="header-action-item compare" (click)="navigateToCompare()">
          <span class="material-icons">compare_arrows</span>
          <span class="text">Compare</span>
          <span class="badge" *ngIf="compareCount > 0">{{ compareCount }}</span>
        </a>
        
        <a class="header-action-item wishlist" (click)="navigateToWishlist()">
          <span class="material-icons">favorite_border</span>
          <span class="text">Wishlist</span>
          <span class="badge" *ngIf="wishlistCount > 0">{{ wishlistCount }}</span>
        </a>

        <a class="header-action-item cart" (click)="navigateToCart()">
          <span class="material-icons">shopping_cart</span>
          <span class="text">Cart</span>
          <span class="badge" *ngIf="cartItemCount > 0">{{ cartItemCount }}</span>
        </a>

        <a class="header-action-item account" (click)="toggleAccountSlider()">
          <span class="material-icons">person_outline</span>
          <span class="text">Account</span>
        </a>
        
        <!-- Language Selector -->
        <div class="language-selector" (click)="toggleLanguageDropdown()">
          <span class="flag-icon">üåê</span>
          <span class="text">{{ selectedLanguageCode }}</span>
          <span class="material-icons arrow-small">expand_more</span>
          
          <!-- Language Dropdown Menu -->
          <div class="language-dropdown-menu" *ngIf="languageDropdownOpen">
            <div class="language-header">Change language</div>
            <div class="language-option" (click)="selectLanguage('en', 'EN')">
              <input type="radio" [checked]="selectedLanguage === 'en'">
              <span>English - EN</span>
            </div>
            <div class="language-option" (click)="selectLanguage('es', 'ES')">
              <input type="radio" [checked]="selectedLanguage === 'es'">
              <span>espa√±ol - ES</span>
            </div>
            <div class="language-option" (click)="selectLanguage('ar', 'AR')">
              <input type="radio" [checked]="selectedLanguage === 'ar'">
              <span>ÿßŸÑÿπÿ±ÿ®Ÿäÿ© - AR</span>
            </div>
            <div class="language-option" (click)="selectLanguage('de', 'DE')">
              <input type="radio" [checked]="selectedLanguage === 'de'">
              <span>Deutsch - DE</span>
            </div>
            <div class="language-option" (click)="selectLanguage('he', 'HE')">
              <input type="radio" [checked]="selectedLanguage === 'he'">
              <span>◊¢◊ë◊®◊ô◊™ - HE</span>
            </div>
            <div class="language-option" (click)="selectLanguage('ko', 'KO')">
              <input type="radio" [checked]="selectedLanguage === 'ko'">
              <span>ÌïúÍµ≠Ïñ¥ - KO</span>
            </div>
            <div class="language-option" (click)="selectLanguage('pt', 'PT')">
              <input type="radio" [checked]="selectedLanguage === 'pt'">
              <span>portugu√™s - PT</span>
            </div>
            <div class="language-option" (click)="selectLanguage('zh', 'ZH')">
              <input type="radio" [checked]="selectedLanguage === 'zh'">
              <span>‰∏≠Êñá (ÁÆÄ‰Ωì) - ZH</span>
            </div>
          </div>
        </div>
      </div>

      <button class="mobile-menu-toggle" (click)="toggleMobileMenu()">
        <span class="material-icons">menu</span>
      </button>
    </div>
  </div>

  <!-- New Middle Row with Quick Links -->
  <div class="middle-header">
    <div class="container">
      <div class="quick-links">
        <a class="quick-link" (click)="navigateTo('/daily-deals')">
          <span class="material-icons">local_offer</span>
          <span>Daily Deals</span>
        </a>
        <a class="quick-link" (click)="navigateTo('/flash-sales')">
          <span class="material-icons">flash_on</span>
          <span>Flash Sales</span>
        </a>
        <a class="quick-link" (click)="navigateTo('/new-arrivals')">
          <span class="material-icons">new_releases</span>
          <span>New Arrivals</span>
        </a>
        <a class="quick-link" (click)="navigateTo('/trending')">
          <span class="material-icons">trending_up</span>
          <span>Trending Now</span>
        </a>
        <a class="quick-link" (click)="navigateTo('/clearance')">
          <span class="material-icons">clear_all</span>
          <span>Clearance</span>
        </a>
        <a class="quick-link" (click)="navigateTo('/gift-cards')">
          <span class="material-icons">card_giftcard</span>
          <span>Gift Cards</span>
        </a>
        <a class="quick-link" (click)="navigateTo('/help-center')">
          <span class="material-icons">help_center</span>
          <span>Help Center</span>
        </a>
      </div>
    </div>
  </div>

  <nav class="main-nav" [class.mobile-open]="mobileMenuOpen">
    <div class="container nav-container">
      <!-- Browse All Categories button -->
      <div class="browse-categories-wrapper">
        <button class="browse-categories-btn" [class.active]="categoriesDropdownOpen" 
                (click)="toggleCategoriesDropdown()">
          <span class="material-icons">apps</span>
          <span>Browse All Categories</span>
          <span class="material-icons arrow">{{ categoriesDropdownOpen ? 'expand_less' : 'expand_more' }}</span>
        </button>

        <!-- Enhanced Categories Mega Dropdown -->
        <div class="categories-mega-dropdown" *ngIf="categoriesDropdownOpen" 
             (mouseleave)="categoriesDropdownOpen = false">
          <div class="categories-mega-content">
            <!-- Left Column - Departments -->
            <div class="departments-column">
              <h4 class="departments-title">Shop by Department</h4>
              <div class="departments-list">
                <div class="department-item" 
                     *ngFor="let department of departments"
                     [class.active]="activeDepartment?.id === department.id"
                     (mouseenter)="setActiveDepartment(department)">
                  <span class="department-icon">{{ department.icon }}</span>
                  <span class="department-name">{{ department.name }}</span>
                  <span class="material-icons arrow-right">chevron_right</span>
                </div>
              </div>
            </div>

            <!-- Right Column - Department Content -->
            <div class="department-content-column" *ngIf="activeDepartment">
              <!-- Search Section -->
              <div class="search-section-mini">
                <div class="search-mini">
                  <input type="text" placeholder="Search for products, brands..." class="search-mini-input">
                  <span class="material-icons search-mini-icon">search</span>
                </div>
              </div>

              <!-- Main Content Grid -->
              <div class="department-main-content">
                <!-- Subcategories Section -->
                <div class="subcategories-section">
                  <div class="subcategories-grid">
                    <div class="subcategory-column" *ngFor="let column of activeDepartment.subcategories">
                      <h6 class="subcategory-title" *ngIf="column.title">{{ column.title }}</h6>
                      <div class="subcategory-items">
                        <a *ngFor="let item of column.items" 
                           class="subcategory-item"
                           (click)="navigateToSubcategory(item.route)">
                          {{ item.name }}
                        </a>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Featured Stores Section -->
                <div class="featured-stores-section" *ngIf="activeDepartment.featuredStores.length">
                  <h5 class="section-title">Featured Stores</h5>
                  <div class="featured-stores-grid">
                    <a *ngFor="let store of activeDepartment.featuredStores" 
                       class="featured-store-item"
                       (click)="navigateToStore(store.route)">
                      <span class="store-icon">üè™</span>
                      <span class="store-name">{{ store.name }}</span>
                    </a>
                  </div>
                </div>

                <!-- Promotional Banner -->
                <div class="promo-banner-section" *ngIf="activeDepartment.promo">
                  <div class="promo-banner">
                    <div class="promo-content">
                      <span class="promo-badge">{{ activeDepartment.promo.badge }}</span>
                      <h3 class="promo-title">{{ activeDepartment.promo.title }}</h3>
                      <p class="promo-description">{{ activeDepartment.promo.description }}</p>
                      <button class="promo-btn" (click)="navigateTo(activeDepartment.promo.route)">
                        {{ activeDepartment.promo.buttonText }}
                      </button>
                    </div>
                    <div class="promo-image">
                      <img [src]="activeDepartment.promo.image" [alt]="activeDepartment.promo.title" />
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Default Content when no department is active -->
            <div class="department-content-column default-content" *ngIf="!activeDepartment">
              <div class="default-content-inner">
                <h5 class="content-title">Popular Categories</h5>
                <div class="default-categories-grid">
                  <div class="default-category-item" *ngFor="let category of defaultCategories"
                       (click)="navigateTo(category.route)">
                    <div class="category-icon-wrapper">
                      <span class="category-icon">{{ category.icon }}</span>
                    </div>
                    <span class="category-name">{{ category.name }}</span>
                  </div>
                </div>
                
                <!-- Quick Access Section -->
                <div class="quick-access-section">
                  <h5 class="content-title">Quick Access</h5>
                  <div class="quick-links-mini">
                    <a class="quick-link-mini" (click)="navigateTo('/daily-deals')">üî• Daily Deals</a>
                    <a class="quick-link-mini" (click)="navigateTo('/new-arrivals')">üÜï New Arrivals</a>
                    <a class="quick-link-mini" (click)="navigateTo('/best-sellers')">üèÜ Best Sellers</a>
                    <a class="quick-link-mini" (click)="navigateTo('/clearance')">üí∏ Clearance</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Main navigation links -->
      <ul class="nav-links">
        <!-- Hot Deals with fire icon -->
        <li class="nav-item">
          <a (click)="navigateTo('/hot-deals')" class="nav-link">
            <span class="material-icons hot-icon">local_fire_department</span>
            Hot Deals
          </a>
        </li>
        
        <!-- Home with dropdown -->
        <li class="nav-item" [class.active]="homeDropdownOpen" 
            (mouseenter)="homeDropdownOpen = true" (mouseleave)="homeDropdownOpen = false">
          <a class="nav-link">Home <span class="material-icons arrow-down">expand_more</span></a>
          <div class="dropdown simple-dropdown" *ngIf="homeDropdownOpen">
            <a (click)="navigateTo('')" class="dropdown-item">Home 1</a>
            <a (click)="navigateTo('/home2')" class="dropdown-item">Home 2</a>
            <a (click)="navigateTo('/home3')" class="dropdown-item">Home 3</a>
          </div>
        </li>
        
        <!-- About without dropdown -->
        <li class="nav-item">
          <a (click)="navigateTo('/about')" class="nav-link">About</a>
        </li>
        
        <!-- Shop with mega dropdown -->
        <li class="nav-item" [class.active]="shopDropdownOpen" 
            (mouseenter)="shopDropdownOpen = true" (mouseleave)="shopDropdownOpen = false">
          <a class="nav-link">Shop <span class="material-icons arrow-down">expand_more</span></a>
          <div class="dropdown shop-mega-dropdown" *ngIf="shopDropdownOpen">
            <div class="mega-content">
              <div class="mega-column">
                <h4 class="mega-title">Product Style</h4>
                <a (click)="navigateTo('/shop/style-one')" class="dropdown-item">Product Style One</a>
                <a (click)="navigateTo('/shop/style-two')" class="dropdown-item">Product Style Two</a>
                <a (click)="navigateTo('/shop/style-three')" class="dropdown-item">Product Style Three</a>
                <a (click)="navigateTo('/shop/style-four')" class="dropdown-item">Product Style Four</a>
                <a (click)="navigateTo('/shop/load-more')" class="dropdown-item">Product Load More</a>
                <a (click)="navigateTo('/shop/infinite-scroll')" class="dropdown-item">Product Infinite Scrolling</a>
                <a (click)="navigateTo('/shop/wide')" class="dropdown-item">Shop Wide</a>
                <a (click)="navigateTo('/shop/left-sidebar')" class="dropdown-item">Shop With Left Sidebar</a>
                <a (click)="navigateTo('/shop/right-sidebar')" class="dropdown-item">Shop With Right Sidebar</a>
                <a (click)="navigateTo('/shop/list-left')" class="dropdown-item">Shop List Left Sidebar</a>
              </div>
              <div class="mega-column">
                <h4 class="mega-title">Product Single Style</h4>
                <a (click)="navigateTo('/product/single-one')" class="dropdown-item">Product Single Style One</a>
                <a (click)="navigateTo('/product/single-two')" class="dropdown-item">Product Single Style Two</a>
                <a (click)="navigateTo('/product/single-three')" class="dropdown-item">Product Single Style Three</a>
                <a (click)="navigateTo('/product/single-four')" class="dropdown-item">Product Single Style Four</a>
                
                <h4 class="mega-title" style="margin-top: 20px;">Product Single Features</h4>
                <a (click)="navigateTo('/product/deals-date')" class="dropdown-item">Product With Deals Date</a>
                <a (click)="navigateTo('/product/message-box')" class="dropdown-item">Product With Message Box</a>
                <a (click)="navigateTo('/product/video-one')" class="dropdown-item">Product With Video Style One</a>
                <a (click)="navigateTo('/product/video-two')" class="dropdown-item">Product With Video Style Two</a>
                <a (click)="navigateTo('/product/advertisement')" class="dropdown-item">Product With Advertisement</a>
              </div>
              <div class="mega-column">
                <h4 class="mega-title">Product Types</h4>
                <a (click)="navigateTo('/product/simple')" class="dropdown-item">Simple product</a>
                <a (click)="navigateTo('/product/grouped')" class="dropdown-item">Grouped product</a>
                <a (click)="navigateTo('/product/external')" class="dropdown-item">External/Affiliate product</a>
                <a (click)="navigateTo('/product/variable')" class="dropdown-item">Variable product</a>
                <a (click)="navigateTo('/product/frequently-bought')" class="dropdown-item">Frequently Bought Together</a>
                <a (click)="navigateTo('/product/no-sidebar')" class="dropdown-item">Product With No Sidebar</a>
                <a (click)="navigateTo('/product/left-sidebar')" class="dropdown-item">Product With Left Sidebar</a>
              </div>
              <div class="mega-column promo-column">
                <div class="promo-box">
                  <span class="promo-badge">Organic</span>
                  <h3>Everyday Fresh & Clean with Our Products</h3>
                  <button class="shop-now-btn" (click)="navigateTo('/shop')">Shop Now</button>
                  <img src="https://images.unsplash.com/photo-1542838132-92c53300491e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80" alt="Fresh vegetables" class="promo-image" />
                </div>
              </div>
            </div>
          </div>
        </li>
        
        <!-- Vendors with dropdown -->
        <li class="nav-item" [class.active]="vendorsDropdownOpen" 
            (mouseenter)="vendorsDropdownOpen = true" (mouseleave)="vendorsDropdownOpen = false">
          <a class="nav-link">Vendors <span class="material-icons arrow-down">expand_more</span></a>
          <div class="dropdown simple-dropdown" *ngIf="vendorsDropdownOpen">
            <a (click)="navigateTo('/vendors/all')" class="dropdown-item">All Vendors</a>
            <a (click)="navigateTo('/vendors/featured')" class="dropdown-item">Featured Vendors</a>
            <a (click)="navigateTo('/become-vendor')" class="dropdown-item">Become a Vendor</a>
            <a (click)="navigateTo('/vendor-dashboard')" class="dropdown-item">Vendor Dashboard</a>
          </div>
        </li>
        
        <!-- Mega Menu with dropdown -->
        <li class="nav-item" [class.active]="megaMenuDropdownOpen" 
            (mouseenter)="megaMenuDropdownOpen = true" (mouseleave)="megaMenuDropdownOpen = false">
          <a class="nav-link">Mega Menu <span class="material-icons arrow-down">expand_more</span></a>
          <div class="dropdown simple-dropdown" *ngIf="megaMenuDropdownOpen">
            <a (click)="navigateTo('/category/electronics')" class="dropdown-item">Electronics</a>
            <a (click)="navigateTo('/category/fashion')" class="dropdown-item">Fashion</a>
            <a (click)="navigateTo('/category/home')" class="dropdown-item">Home & Garden</a>
          </div>
        </li>
        
        <!-- Blog with dropdown -->
        <li class="nav-item" [class.active]="blogDropdownOpen" 
            (mouseenter)="blogDropdownOpen = true" (mouseleave)="blogDropdownOpen = false">
          <a class="nav-link">Blog <span class="material-icons arrow-down">expand_more</span></a>
          <div class="dropdown simple-dropdown" *ngIf="blogDropdownOpen">
            <a (click)="navigateTo('/blog/latest')" class="dropdown-item">Latest Posts</a>
            <a (click)="navigateTo('/blog/popular')" class="dropdown-item">Popular Posts</a>
            <a (click)="navigateTo('/blog/categories')" class="dropdown-item">Categories</a>
          </div>
        </li>
        
        <!-- Pages with dropdown -->
        <li class="nav-item" [class.active]="pagesDropdownOpen" 
            (mouseenter)="pagesDropdownOpen = true" (mouseleave)="pagesDropdownOpen = false">
          <a class="nav-link">Pages <span class="material-icons arrow-down">expand_more</span></a>
          <div class="dropdown simple-dropdown" *ngIf="pagesDropdownOpen">
            <a (click)="navigateTo('/about')" class="dropdown-item">About Us</a>
            <a (click)="navigateTo('/contact')" class="dropdown-item">Contact Us</a>
            <a (click)="navigateTo('/faq')" class="dropdown-item">FAQ</a>
            <a (click)="navigateTo('/terms')" class="dropdown-item">Terms & Conditions</a>
          </div>
        </li>
        
        <!-- Contact without dropdown -->
        <li class="nav-item">
          <a (click)="navigateTo('/contact')" class="nav-link">Contact</a>
        </li>
      </ul>
    </div>
  </nav>
</header>

<!-- Account Slider Overlay -->
<div class="account-slider-overlay" *ngIf="accountSliderOpen" (click)="toggleAccountSlider()"></div>

<!-- Account Slider -->
<div class="account-slider" [class.open]="accountSliderOpen">
  <div class="account-slider-header">
    <h2>My Account</h2>
    <button class="close-slider" (click)="toggleAccountSlider()">
      <span class="material-icons">close</span>
    </button>
  </div>
  
  <div class="account-slider-content">
    <div class="welcome-section">
      <h3>Welcome to BluFountain</h3>
    </div>

    <!-- Existing Account Section -->
    <div class="account-section">
      <h4>I have an account</h4>
      <p class="section-description">Fill in your username and password to access your account.</p>
      
      <form class="login-form">
        <div class="form-group">
          <input type="text" placeholder="Username or Email" class="form-input">
        </div>
        <div class="form-group">
          <input type="password" placeholder="Password" class="form-input">
        </div>
        <button type="submit" class="signin-btn">Sign In</button>
      </form>

      <div class="exclusive-savings">
        <div class="savings-card">
          <span class="member-text">member sign card</span>
          <h4>Sign in for Exclusive Savings!</h4>
        </div>
      </div>
    </div>

    <!-- Customer Account Section -->
    <div class="account-section">
      <h4>Create a New Customer Account</h4>
      <p class="section-description">By creating a Customer account you'll be able to access:</p>
      <ul class="benefits-list">
        <li>Quick Checkout and Order Tracking.</li>
        <li>Orders and Invoices.</li>
      </ul>
      <button class="create-account-btn" (click)="navigateTo('/register/customer')">Create an Account</button>
    </div>

    <!-- Business Account Section -->
    <div class="account-section">
      <h4>Create a New Business Account</h4>
      <p class="section-description">By creating a Business Account you will be able to access:</p>
      <ul class="benefits-list">
        <li>Business Payment Options and Exclusive Discounts.</li>
        <li>A tailored range of Products and Support Services.</li>
      </ul>
      <button class="create-account-btn business" (click)="navigateTo('/register/business')">Create Business Account</button>
    </div>
  </div>
</div>